
{
  "entities": {
    "User": {
      "title": "User",
      "description": "Base user record containing authentication information.",
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "The user's unique ID from Firebase Authentication."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "role": {
          "type": "string",
          "description": "The user's role in the system.",
          "enum": [
            "patient",
            "doctor",
            "medicine_store"
          ]
        }
      },
      "required": [
        "id",
        "email",
        "role"
      ]
    },
    "Patient": {
      "title": "Patient",
      "type": "object",
      "description": "Represents a patient in the healthcare system, extending the base User.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Patient entity, same as the user UID."
        },
        "firstName": {
          "type": "string",
          "description": "Patient's first name."
        },
        "lastName": {
          "type": "string",
          "description": "Patient's last name."
        },
        "dateOfBirth": {
          "type": "string",
          "description": "Patient's date of birth.",
          "format": "date"
        },
        "email": {
          "type": "string",
          "description": "Patient's email address.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "Patient's phone number."
        },
        "address": {
          "type": "string",
          "description": "Patient's address."
        },
        "avatarUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL for the patient's profile picture."
        },
        "height": {
          "type": "number",
          "description": "Patient's height in centimeters."
        },
        "weight": {
          "type": "number",
          "description": "Patient's weight in kilograms."
        },
        "bloodGroup": {
          "type": "string",
          "description": "Patient's blood group."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "dateOfBirth",
        "email"
      ]
    },
    "Doctor": {
      "title": "Doctor",
      "type": "object",
      "description": "Represents a doctor in the healthcare system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Doctor entity, same as the user UID."
        },
        "firstName": {
          "type": "string",
          "description": "Doctor's first name."
        },
        "lastName": {
          "type": "string",
          "description": "Doctor's last name."
        },
        "name": {
          "type": "string",
          "description": "Doctor's full name, for display purposes."
        },
        "specialty": {
          "type": "string",
          "description": "Doctor's area of specialization."
        },
        "email": {
          "type": "string",
          "description": "Doctor's email address.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "Doctor's phone number."
        },
        "location": {
          "type": "string",
          "description": "Doctor's office address or city."
        },
        "avatarUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL for the doctor's profile picture."
        },
        "rating": {
          "type": "number",
          "description": "Average rating from patient reviews."
        },
        "reviews": {
          "type": "number",
          "description": "Total number of reviews."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "name",
        "specialty",
        "email"
      ]
    },
    "MedicineStore": {
      "title": "MedicineStore",
      "type": "object",
      "description": "Represents a medicine store (pharmacy).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the MedicineStore entity, same as the user UID."
        },
        "name": {
          "type": "string",
          "description": "Name of the medicine store."
        },
        "address": {
          "type": "string",
          "description": "Address of the medicine store."
        },
        "phone": {
          "type": "string",
          "description": "Medicine store's phone number."
        },
        "email": {
          "type": "string",
          "description": "Medicine store's email address.",
          "format": "email"
        },
        "ownerName": {
          "type": "string",
          "description": "Full name of the pharmacy owner."
        },
        "licenseNumber": {
          "type": "string",
          "description": "Official pharmacy license number."
        },
        "licenseDocumentUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL of the uploaded license document."
        },
        "licenseExpiryDate": {
          "type": "string",
          "format": "date",
          "description": "Expiry date of the pharmacy license."
        },
        "city": {
          "type": "string"
        },
        "state": {
          "type": "string"
        },
        "pincode": {
          "type": "string"
        },
        "openingTime": {
          "type": "string",
          "format": "time"
        },
        "closingTime": {
          "type": "string",
          "format": "time"
        },
        "workingDays": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "homeDelivery": {
          "type": "boolean"
        },
        "services": {
          "type": "object",
          "properties": {
            "prescription": { "type": "boolean" },
            "otc": { "type": "boolean" },
            "generic": { "type": "boolean" }
          }
        }
      },
      "required": [
        "id",
        "name",
        "address",
        "phone",
        "email"
      ]
    },
    "Medicine": {
      "title": "Medicine",
      "description": "Represents a single medicine in a pharmacy's inventory.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string", "description": "The trade name of the medicine." },
        "strength": { "type": "string", "description": "The strength of the medicine, e.g., '500mg'." },
        "saltComposition": { "type": "string", "description": "The active chemical ingredients." },
        "category": { "type": "string", "description": "Medical category, e.g., 'Antibiotic', 'Analgesic'." },
        "isPrescriptionRequired": { "type": "boolean", "description": "Whether a prescription is required." },
        "storageType": { "type": "string", "enum": ["Normal", "Cold"], "description": "Required storage condition." },
        "commonUses": { "type": "string", "description": "A brief summary of what the medicine is used for." },
        "safetyNotes": { "type": "string", "description": "Important safety warnings or contraindications." },
        "stock": { "type": "number", "description": "The current quantity in stock." },
        "expiryDate": { "type": "string", "format": "date", "description": "The expiration date." }
      },
      "required": ["id", "name", "strength", "category", "isPrescriptionRequired", "stock", "expiryDate"]
    },
    "MedicalReport": {
      "title": "MedicalReport",
      "type": "object",
      "description": "Represents a medical report uploaded by a patient, including the AI analysis.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the MedicalReport entity."
        },
        "patientId": {
          "type": "string",
          "description": "ID of the patient who owns the report."
        },
        "uploadDate": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the report was uploaded."
        },
        "reportType": {
          "type": "string",
          "description": "Type of medical report (e.g., Blood Test, MRI)."
        },
        "fileUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL of the stored medical report file."
        },
        "aiSummary": {
          "type": "string",
          "description": "AI-generated simplified summary of the report."
        },
        "aiPotentialIssues": {
          "type": "string",
          "description": "AI-identified potential issues."
        },
        "aiNextSteps": {
          "type": "string",
          "description": "AI-suggested next steps."
        }
      },
      "required": [
        "id",
        "patientId",
        "uploadDate",
        "reportType",
        "fileUrl"
      ]
    },
    "ScanImage": {
      "title": "ScanImage",
      "type": "object",
      "description": "Represents a medical scan image (X-ray, CT, MRI) and its analysis.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the scan image."
        },
        "patientId": {
          "type": "string",
          "description": "ID of the patient who owns the scan."
        },
        "uploadDate": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the scan was uploaded."
        },
        "scanType": {
          "type": "string",
          "enum": [
            "X-ray",
            "CT",
            "MRI"
          ]
        },
        "imageUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL of the stored scan image."
        },
        "analyzedImageUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL of the AI-analyzed image with heatmaps or markings."
        },
        "aiAnalysis": {
          "type": "object",
          "properties": {
            "summary": { "type": "string" },
            "criticalFindings": { "type": "string" },
            "keyFindings": { "type": "string" },
            "healthIssues": { "type": "string" },
            "recommendedSpecialists": { "type": "string" },
            "recommendedMedications": { "type": "string" },
            "urgencyClassification": {
              "type": "string",
              "enum": [
                "Emergency",
                "Urgent",
                "Routine",
                "Normal"
              ]
            }
          }
        }
      },
      "required": [
        "id",
        "patientId",
        "uploadDate",
        "scanType",
        "imageUrl"
      ]
    },
    "Appointment": {
      "title": "Appointment",
      "type": "object",
      "description": "Represents a doctor appointment.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Appointment entity."
        },
        "patientId": {
          "type": "string",
          "description": "ID of the patient."
        },
        "doctorId": {
          "type": "string",
          "description": "ID of the doctor."
        },
        "appointmentDateTime": {
          "type": "string",
          "description": "Date and time of the appointment.",
          "format": "date-time"
        },
        "reason": {
          "type": "string",
          "description": "Reason for the appointment."
        },
        "notes": {
          "type": "string",
          "description": "Consultation notes from the doctor."
        }
      },
      "required": [
        "id",
        "patientId",
        "doctorId",
        "appointmentDateTime",
        "reason"
      ]
    },
    "Prescription": {
      "title": "Prescription",
      "type": "object",
      "description": "Represents a doctor's prescription for a patient.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Prescription entity."
        },
        "patientId": {
          "type": "string",
          "description": "ID of the patient."
        },
        "doctorId": {
          "type": "string",
          "description": "ID of the prescribing doctor."
        },
        "date": {
          "type": "string",
          "description": "Date the prescription was issued.",
          "format": "date-time"
        },
        "medicines": {
          "type": "array",
          "description": "List of prescribed medicines.",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "dosage": {
                "type": "string"
              },
              "frequency": {
                "type": "string"
              }
            },
            "required": [
              "name",
              "dosage",
              "frequency"
            ]
          }
        },
        "notes": {
          "type": "string",
          "description": "Additional notes from the doctor."
        }
      },
      "required": [
        "id",
        "patientId",
        "doctorId",
        "date",
        "medicines"
      ]
    },
    "Order": {
      "title": "Order",
      "type": "object",
      "description": "Represents an order for medicines from a medicine store.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Order entity."
        },
        "patientId": {
          "type": "string",
          "description": "ID of the patient who placed the order."
        },
        "medicineStoreId": {
          "type": "string",
          "description": "ID of the medicine store fulfilling the order."
        },
        "prescriptionId": {
          "type": "string",
          "description": "ID of the corresponding prescription."
        },
        "orderDate": {
          "type": "string",
          "description": "Date when the order was placed.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "Status of the order.",
          "enum": [
            "Processing",
            "Shipped",
            "Delivered",
            "Cancelled"
          ]
        },
        "medicines": {
          "type": "array",
          "description": "AI-analyzed list of medicines from the prescription with inventory status.",
          "items": {
            "type": "object",
            "properties": {
              "name": { "type": "string" },
              "dosage": { "type": "string" },
              "frequency": { "type": "string" },
              "inventoryStatus": {
                "type": "string",
                "enum": ["Available", "Low Stock", "Out of Stock", "Unknown"]
              }
            },
            "required": ["name", "dosage", "frequency", "inventoryStatus"]
          }
        }
      },
      "required": [
        "id",
        "patientId",
        "medicineStoreId",
        "prescriptionId",
        "orderDate",
        "status",
        "medicines"
      ]
    },
    "DataConsent": {
      "title": "DataConsent",
      "type": "object",
      "description": "Represents a patient's consent to share data with a doctor.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the DataConsent entity."
        },
        "patientId": {
          "type": "string",
          "description": "ID of the patient giving consent."
        },
        "doctorId": {
          "type": "string",
          "description": "ID of the doctor receiving consent."
        },
        "startDate": {
          "type": "string",
          "description": "Date when the consent starts.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "Date when the consent expires.",
          "format": "date-time"
        },
        "consentGiven": {
          "type": "boolean",
          "description": "True if consent is active, false if revoked."
        }
      },
      "required": [
        "id",
        "patientId",
        "doctorId",
        "startDate",
        "endDate",
        "consentGiven"
      ]
    },
    "Allergy": {
      "title": "Allergy",
      "type": "object",
      "description": "Represents a specific allergy a patient has.",
      "properties": {
        "id": { "type": "string" },
        "name": {
          "type": "string",
          "description": "Name of the allergy (e.g., Peanuts, Penicillin)."
        }
      },
      "required": ["id", "name"]
    },
    "ChronicCondition": {
      "title": "ChronicCondition",
      "type": "object",
      "description": "Represents a specific chronic condition a patient has.",
      "properties": {
        "id": { "type": "string" },
        "name": {
          "type": "string",
          "description": "Name of the chronic condition (e.g., Hypertension, Diabetes)."
        }
      },
      "required": ["id", "name"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/entities/User"
          },
          "description": "Stores base user account info, including their role."
        }
      },
      {
        "path": "/patients/{patientId}",
        "definition": {
          "entityName": "Patient",
          "schema": {
            "$ref": "#/entities/Patient"
          },
          "description": "Stores patient profile information. The document ID must match the user's UID."
        }
      },
      {
        "path": "/doctors/{doctorId}",
        "definition": {
          "entityName": "Doctor",
          "schema": {
            "$ref": "#/entities/Doctor"
          },
          "description": "Stores doctor profile information. The document ID must match the user's UID."
        }
      },
      {
        "path": "/medicine_stores/{storeId}",
        "definition": {
          "entityName": "MedicineStore",
          "schema": {
            "$ref": "#/entities/MedicineStore"
          },
          "description": "Stores medicine store profile information. The document ID must match the user's UID."
        }
      },
      {
        "path": "/medicine_stores/{storeId}/inventory/{medicineId}",
        "definition": {
          "entityName": "Medicine",
          "schema": {
            "$ref": "#/entities/Medicine"
          },
          "description": "Stores the inventory for a specific medicine store."
        }
      },
      {
        "path": "/patients/{patientId}/medical_reports/{reportId}",
        "definition": {
          "entityName": "MedicalReport",
          "schema": {
            "$ref": "#/entities/MedicalReport"
          },
          "description": "Stores medical reports and their AI analysis, nested under the patient."
        }
      },
      {
        "path": "/patients/{patientId}/scan_images/{scanId}",
        "definition": {
          "entityName": "ScanImage",
          "schema": {
            "$ref": "#/entities/ScanImage"
          },
          "description": "Stores medical scans and their AI analysis, nested under the patient."
        }
      },
      {
        "path": "/patients/{patientId}/appointments/{appointmentId}",
        "definition": {
          "entityName": "Appointment",
          "schema": {
            "$ref": "#/entities/Appointment"
          },
          "description": "Stores appointment records for a patient."
        }
      },
      {
        "path": "/doctors/{doctorId}/appointments/{appointmentId}",
        "definition": {
          "entityName": "Appointment",
          "schema": {
            "$ref": "#/entities/Appointment"
          },
          "description": "Denormalized appointment records for easy lookup by doctors."
        }
      },
      {
        "path": "/patients/{patientId}/prescriptions/{prescriptionId}",
        "definition": {
          "entityName": "Prescription",
          "schema": {
            "$ref": "#/entities/Prescription"
          },
          "description": "Stores prescriptions for a patient."
        }
      },
      {
        "path": "/patients/{patientId}/orders/{orderId}",
        "definition": {
          "entityName": "Order",
          "schema": {
            "$ref": "#/entities/Order"
          },
          "description": "Stores medicine orders placed by a patient."
        }
      },
      {
        "path": "/medicine_stores/{storeId}/orders/{orderId}",
        "definition": {
          "entityName": "Order",
          "schema": {
            "$ref": "#/entities/Order"
          },
          "description": "Denormalized order records for easy lookup by medicine stores."
        }
      },
      {
        "path": "/patients/{patientId}/data_consents/{consentId}",
        "definition": {
          "entityName": "DataConsent",
          "schema": {
            "$ref": "#/entities/DataConsent"
          },
          "description": "Manages patient consent for doctors to access their data."
        }
      },
      {
        "path": "/patients/{patientId}/allergies/{allergyId}",
        "definition": {
          "entityName": "Allergy",
          "schema": {
            "$ref": "#/entities/Allergy"
          },
          "description": "Stores patient-specific allergies."
        }
      },
      {
        "path": "/patients/{patientId}/chronic_conditions/{conditionId}",
        "definition": {
          "entityName": "ChronicCondition",
          "schema": {
            "$ref": "#/entities/ChronicCondition"
          },
          "description": "Stores patient-specific chronic conditions."
        }
      }
    ]
  }
}
