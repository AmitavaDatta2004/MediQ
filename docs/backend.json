{
  "entities": {
    "User": {
      "title": "User",
      "description": "Base user record containing authentication information.",
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "The user's unique ID from Firebase Authentication."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "role": {
          "type": "string",
          "description": "The user's role in the system.",
          "enum": [
            "patient",
            "doctor",
            "medicine_store"
          ]
        }
      },
      "required": [
        "id",
        "email",
        "role"
      ]
    },
    "Patient": {
      "title": "Patient",
      "type": "object",
      "description": "Represents a patient in the healthcare system, extending the base User.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Patient entity, same as the user UID."
        },
        "firstName": {
          "type": "string",
          "description": "Patient's first name."
        },
        "lastName": {
          "type": "string",
          "description": "Patient's last name."
        },
        "dateOfBirth": {
          "type": "string",
          "description": "Patient's date of birth.",
          "format": "date"
        },
        "email": {
          "type": "string",
          "description": "Patient's email address.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "Patient's phone number."
        },
        "address": {
          "type": "string",
          "description": "Patient's address."
        },
        "avatarUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL for the patient's profile picture."
        },
        "allergyIds": {
          "type": "array",
          "description": "List of IDs referencing allergies from the master 'allergies' collection.",
          "items": {
            "type": "string"
          }
        },
        "chronicConditionIds": {
          "type": "array",
          "description": "List of IDs referencing chronic conditions from the master 'chronicConditions' collection.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "dateOfBirth",
        "email"
      ]
    },
    "Doctor": {
      "title": "Doctor",
      "type": "object",
      "description": "Represents a doctor in the healthcare system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Doctor entity, same as the user UID."
        },
        "firstName": {
          "type": "string",
          "description": "Doctor's first name."
        },
        "lastName": {
          "type": "string",
          "description": "Doctor's last name."
        },
        "name": {
          "type": "string",
          "description": "Doctor's full name, for display purposes."
        },
        "specialty": {
          "type": "string",
          "description": "Doctor's area of specialization."
        },
        "email": {
          "type": "string",
          "description": "Doctor's email address.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "Doctor's phone number."
        },
        "location": {
          "type": "string",
          "description": "Doctor's office address or city."
        },
        "avatarUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL for the doctor's profile picture."
        },
        "rating": {
          "type": "number",
          "description": "Average rating from patient reviews."
        },
        "reviews": {
          "type": "number",
          "description": "Total number of reviews."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "name",
        "specialty",
        "email"
      ]
    },
    "MedicineStore": {
      "title": "MedicineStore",
      "type": "object",
      "description": "Represents a medicine store (pharmacy).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the MedicineStore entity, same as the user UID."
        },
        "name": {
          "type": "string",
          "description": "Name of the medicine store."
        },
        "address": {
          "type": "string",
          "description": "Address of the medicine store."
        },
        "phone": {
          "type": "string",
          "description": "Medicine store's phone number."
        },
        "email": {
          "type": "string",
          "description": "Medicine store's email address.",
          "format": "email"
        }
      },
      "required": [
        "id",
        "name",
        "address",
        "phone",
        "email"
      ]
    },
    "MedicalReport": {
      "title": "MedicalReport",
      "type": "object",
      "description": "Represents a medical report uploaded by a patient, including the AI analysis.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the MedicalReport entity."
        },
        "patientId": {
          "type": "string",
          "description": "ID of the patient who owns the report."
        },
        "uploadDate": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the report was uploaded."
        },
        "reportType": {
          "type": "string",
          "description": "Type of medical report (e.g., Blood Test, MRI)."
        },
        "fileUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL of the stored medical report file."
        },
        "aiSummary": {
          "type": "string",
          "description": "AI-generated simplified summary of the report."
        },
        "aiPotentialIssues": {
          "type": "string",
          "description": "AI-identified potential issues."
        },
        "aiNextSteps": {
          "type": "string",
          "description": "AI-suggested next steps."
        }
      },
      "required": [
        "id",
        "patientId",
        "uploadDate",
        "reportType",
        "fileUrl"
      ]
    },
    "ScanImage": {
      "title": "ScanImage",
      "type": "object",
      "description": "Represents a medical scan image (X-ray, CT, MRI) and its analysis.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the scan image."
        },
        "patientId": {
          "type": "string",
          "description": "ID of the patient who owns the scan."
        },
        "uploadDate": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the scan was uploaded."
        },
        "scanType": {
          "type": "string",
          "enum": [
            "X-ray",
            "CT",
            "MRI"
          ]
        },
        "imageUrl": {
          "type": "string",
          "format": "uri",
          "description": "URL of the stored scan image."
        },
        "aiAnalysis": {
          "type": "object",
          "properties": {
            "anomaliesDetected": {
              "type": "boolean"
            },
            "anomalyReport": {
              "type": "string"
            },
            "heatmapDataUri": {
              "type": "string"
            },
            "urgencyClassification": {
              "type": "string",
              "enum": [
                "Emergency",
                "Urgent",
                "Routine",
                "Normal"
              ]
            }
          }
        }
      },
      "required": [
        "id",
        "patientId",
        "uploadDate",
        "scanType",
        "imageUrl"
      ]
    },
    "Appointment": {
      "title": "Appointment",
      "type": "object",
      "description": "Represents a doctor appointment.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Appointment entity."
        },
        "patientId": {
          "type": "string",
          "description": "ID of the patient."
        },
        "doctorId": {
          "type": "string",
          "description": "ID of the doctor."
        },
        "appointmentDateTime": {
          "type": "string",
          "description": "Date and time of the appointment.",
          "format": "date-time"
        },
        "reason": {
          "type": "string",
          "description": "Reason for the appointment."
        },
        "notes": {
          "type": "string",
          "description": "Consultation notes from the doctor."
        }
      },
      "required": [
        "id",
        "patientId",
        "doctorId",
        "appointmentDateTime",
        "reason"
      ]
    },
    "Prescription": {
      "title": "Prescription",
      "type": "object",
      "description": "Represents a doctor's prescription for a patient.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Prescription entity."
        },
        "patientId": {
          "type": "string",
          "description": "ID of the patient."
        },
        "doctorId": {
          "type": "string",
          "description": "ID of the prescribing doctor."
        },
        "date": {
          "type": "string",
          "description": "Date the prescription was issued.",
          "format": "date-time"
        },
        "medicines": {
          "type": "array",
          "description": "List of prescribed medicines.",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "dosage": {
                "type": "string"
              },
              "frequency": {
                "type": "string"
              }
            },
            "required": [
              "name",
              "dosage",
              "frequency"
            ]
          }
        },
        "notes": {
          "type": "string",
          "description": "Additional notes from the doctor."
        }
      },
      "required": [
        "id",
        "patientId",
        "doctorId",
        "date",
        "medicines"
      ]
    },
    "Order": {
      "title": "Order",
      "type": "object",
      "description": "Represents an order for medicines from a medicine store.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Order entity."
        },
        "patientId": {
          "type": "string",
          "description": "ID of the patient who placed the order."
        },
        "medicineStoreId": {
          "type": "string",
          "description": "ID of the medicine store fulfilling the order."
        },
        "prescriptionId": {
          "type": "string",
          "description": "ID of the corresponding prescription."
        },
        "orderDate": {
          "type": "string",
          "description": "Date when the order was placed.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "Status of the order.",
          "enum": [
            "Processing",
            "Shipped",
            "Delivered",
            "Cancelled"
          ]
        }
      },
      "required": [
        "id",
        "patientId",
        "medicineStoreId",
        "prescriptionId",
        "orderDate",
        "status"
      ]
    },
    "DataConsent": {
      "title": "DataConsent",
      "type": "object",
      "description": "Represents a patient's consent to share data with a doctor.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the DataConsent entity."
        },
        "patientId": {
          "type": "string",
          "description": "ID of the patient giving consent."
        },
        "doctorId": {
          "type": "string",
          "description": "ID of the doctor receiving consent."
        },
        "startDate": {
          "type": "string",
          "description": "Date when the consent starts.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "Date when the consent expires.",
          "format": "date-time"
        },
        "consentGiven": {
          "type": "boolean",
          "description": "True if consent is active, false if revoked."
        }
      },
      "required": [
        "id",
        "patientId",
        "doctorId",
        "startDate",
        "endDate",
        "consentGiven"
      ]
    },
    "Allergy": {
      "title": "Allergy",
      "type": "object",
      "description": "Represents a master list of possible allergies.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Allergy entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the allergy (e.g., Peanuts, Penicillin)."
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "ChronicCondition": {
      "title": "ChronicCondition",
      "type": "object",
      "description": "Represents a master list of possible chronic conditions.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the ChronicCondition entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the chronic condition (e.g., Hypertension, Diabetes)."
        }
      },
      "required": [
        "id",
        "name"
      ]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/entities/User"
          },
          "description": "Stores base user account info, including their role."
        }
      },
      {
        "path": "/patients/{patientId}",
        "definition": {
          "entityName": "Patient",
          "schema": {
            "$ref": "#/entities/Patient"
          },
          "description": "Stores patient profile information. The document ID must match the user's UID."
        }
      },
      {
        "path": "/doctors/{doctorId}",
        "definition": {
          "entityName": "Doctor",
          "schema": {
            "$ref": "#/entities/Doctor"
          },
          "description": "Stores doctor profile information. The document ID must match the user's UID."
        }
      },
      {
        "path": "/medicine_stores/{storeId}",
        "definition": {
          "entityName": "MedicineStore",
          "schema": {
            "$ref": "#/entities/MedicineStore"
          },
          "description": "Stores medicine store profile information. The document ID must match the user's UID."
        }
      },
      {
        "path": "/patients/{patientId}/medical_reports/{reportId}",
        "definition": {
          "entityName": "MedicalReport",
          "schema": {
            "$ref": "#/entities/MedicalReport"
          },
          "description": "Stores medical reports and their AI analysis, nested under the patient."
        }
      },
      {
        "path": "/patients/{patientId}/scan_images/{scanId}",
        "definition": {
          "entityName": "ScanImage",
          "schema": {
            "$ref": "#/entities/ScanImage"
          },
          "description": "Stores medical scans and their AI analysis, nested under the patient."
        }
      },
      {
        "path": "/patients/{patientId}/appointments/{appointmentId}",
        "definition": {
          "entityName": "Appointment",
          "schema": {
            "$ref": "#/entities/Appointment"
          },
          "description": "Stores appointment records for a patient."
        }
      },
      {
        "path": "/doctors/{doctorId}/appointments/{appointmentId}",
        "definition": {
          "entityName": "Appointment",
          "schema": {
            "$ref": "#/entities/Appointment"
          },
          "description": "Denormalized appointment records for easy lookup by doctors."
        }
      },
      {
        "path": "/patients/{patientId}/prescriptions/{prescriptionId}",
        "definition": {
          "entityName": "Prescription",
          "schema": {
            "$ref": "#/entities/Prescription"
          },
          "description": "Stores prescriptions for a patient."
        }
      },
      {
        "path": "/patients/{patientId}/orders/{orderId}",
        "definition": {
          "entityName": "Order",
          "schema": {
            "$ref": "#/entities/Order"
          },
          "description": "Stores medicine orders placed by a patient."
        }
      },
      {
        "path": "/medicine_stores/{storeId}/orders/{orderId}",
        "definition": {
          "entityName": "Order",
          "schema": {
            "$ref": "#/entities/Order"
          },
          "description": "Denormalized order records for easy lookup by medicine stores."
        }
      },
      {
        "path": "/patients/{patientId}/data_consents/{consentId}",
        "definition": {
          "entityName": "DataConsent",
          "schema": {
            "$ref": "#/entities/DataConsent"
          },
          "description": "Manages patient consent for doctors to access their data."
        }
      },
      {
        "path": "/allergies/{allergyId}",
        "definition": {
          "entityName": "Allergy",
          "schema": {
            "$ref": "#/entities/Allergy"
          },
          "description": "Master list of allergies, publicly readable."
        }
      },
      {
        "path": "/chronic_conditions/{conditionId}",
        "definition": {
          "entityName": "ChronicCondition",
          "schema": {
            "$ref": "#/entities/ChronicCondition"
          },
          "description": "Master list of chronic conditions, publicly readable."
        }
      }
    ]
  }
}
